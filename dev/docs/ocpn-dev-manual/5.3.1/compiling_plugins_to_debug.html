<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Compile Plugins for Debugging :: OpenCPN Developers Manual</title>
    <link rel="canonical" href="https://github.com/Rasbats/ocpn-dev-manual/ocpn-dev-manual/5.3.1/compiling_plugins_to_debug.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <div class="navbar">
    <div class="navbar-brand">
      <div class="ocpn-logo"> </div>
      <a class="navbar-title"
         href="https://github.com/Rasbats/ocpn-dev-manual"
      >
        OpenCPN Developers Manual
        </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
       <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://www.opencpn.org">OpenCPN.org</a>
            <a class="navbar-item"
               href="https://opencpn.org/wiki/dokuwiki/doku.php?id=opencpn:opencpn_user_manual"
            >
               User Manual
               </a>
            <a class="navbar-item" href="https://github.com/opencpn/OpenCPN">
               Github Site
               </a>
            <a class="navbar-item" href="https://opencpn.org/flyspray/">
               Bugtracker
               </a>
            <a class="navbar-item"
                href="https://rasbats.github.io/opencpn-plugins-manual/">
                    Plugin Manual (pre-alpha)
               </a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ocpn-dev-manual" data-version="5.3.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">OpenCPN Developer Manual</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Developer Manual</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Introduction</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="intro-AboutThisManual.html">About this Manual</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="intro-Background.html">Background</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="intro-Community.html">Community</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="intro-Terminology.html">Terminology</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Opencpn development</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Compiling</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="od-compile-cmake.html">CMake</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="od-compile-linux.html">Linux</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="od-compile-windows.html">Windows</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="od-compile-mac-osx.html">MacOS</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="od-compile-cross-compile-for-windows-under-linux.html">Mingw windows build on Linux</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="od-code-formatting.html">Code Formatting</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="od-user-interface-styling.html">User Interface Styling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="od-troubleshooting.html">Troubleshooting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Plugin Manager Development</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="pm-plugin-guidelines.html">Plugin Guidelines</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="pm-plugin-documentation.html">Documentation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="pm-plugin-dependencies.html">Dependencies</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pm-plugin-api-versions.html">Plugin API and ABI</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Plugin Manager Workflow</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pm-overview-deployment.html">Deployment overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pm-overview-prereq-workflow.html">Workflow Prerequisites</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pm-overview-prereq-services.html">Prerequisite Services</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pm-overview-prereq-other.html">Cloudsmith Setup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pm-overview-workflow.html">Workflow overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="pm-tp-template.html">Testplugin Template</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="pm-tp-system-structure.html">System Structure</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="pm-tp-dev-setup.html">Developer Setup</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="pm-tp-config-template.html">Configure Template</a>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-text">Build Locally</span>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="pm-tp-adapt-plugin.html">Adapt Plugin</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="pm-tp-deploy.html">Deploy Details</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="pm-tp-update-library.html">Update the Library</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="pm-tp-language-nuance.html">Language Nuances</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="pm-tp-odapi-messaging.html">Odapi Messages</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="pm-tp-odapi.html">Odapi for oDraw</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="pm-tp-ocpn_draw_odapi.html">Ocpn_Draw Odapi</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#AlternativeWorkflow:ROOT:index.adoc">Shipdriver Templates -Alternative Workflow</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#Managed_Plugins:ROOT:nav.adoc">Shipdriver Templates -Managed Plugins Workflow</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#plugin-installer:ROOT:index.adoc">Plugin Manager Installer Documentation</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="#opencpn-plugins-manual:ROOT:index.adoc">OpenCPN Plugin Manuals</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="dm-legacy-plugins.html">Legacy Plugin Packaging</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="dm-manual-maint.html">Maintenance of this Manual</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="dm-i18n.html">Internationalization</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Resources</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="res-prebuilt-build-files.html">Prebuilt Build Files</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="res-online-tools.html">Online Nmea Tools</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">The Attic</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Redundant</span>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="demo_plugin.html">Demonstration Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="updating_the_user_manual.html">Updating the User Manual</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="bug_and_feature_tracking.html">Bugs and feature tracking</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="troubleshooting_plugins.html">Troubleshooting Plugins</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="plugin_submissions.html">Plugin Submissions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="standalone_plugin_compilation.html">Plugin Compilation Win</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="compiling_external_plugins_and_building_install_packages.html">Compile Plugins and build Install Packages</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="compiling_plugins_to_debug.html">Compile Plugins for Debugging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="developer_guide.html">Developer Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Reference</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="languages.html">Internationalization</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="prerequisites.html">Prerequisites</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#compiling_mac_osx.adoc">Compiling on macOS</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="compile_linux_old.html">Compiling on Linux</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="rpi2.html">Compile on Raspberry PI</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="building_and_installing_on_cubieboard_2_with_hw_acceleration.html">Cubieboard 2 with HW acceleration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="building-on-armhf-linux-armbian-orange-pi.html">armhf linux - Armbian - Orange Pi</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="building_on_motorola_xoom.html">Building on Motorola Xoom</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="compiling_on_slackware.html">Compile on Slackware</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="vs2015_workflow.html">Compile 2015 VS Community Workflow</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="compile_windows_2013_vs_community.html">Compile 2013 VS Community Workflow</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="compile_windows_2013_vs_community_ov4.2-4.8.8.html">Compile 2013 VS Community Workflow ov4.2-4.8.8</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="standalone_plugin_compilation.html">Plugin Compilation Win</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="ci-push-linux-build-to-launchpad.html">CI: Push Linux Build to Launchpad</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="codacy.html">Codacy:Automate code quality</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="testquality.html">TestQuality -Test Management</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="nsis_installation_directory.html">NSIS Installation Directory</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="nsis_table.html">NSIS Table</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">User Manual (UM)</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="developer_manual.html">Background</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="community_old.html">Community</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pi_installer-ui.html">PI Manager UI Discussion</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pi_installer_summary.html">PI Manager Summary</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Old Manual</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Compiling on Windows</span>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="languages.html">Internationalization- Languages</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="messaging.html">Messaging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="prerequisites.html">Prerequisites -Just found this</a>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Developer Plugins</span>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Plugin API</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#ocpn_draw_odapi.adoc">OCPN Draw ODAPI</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="beta_plugins.html">Beta Plugins</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Learning</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="coding_solutions.html">Coding Solutions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="fork_build_windows.html">Fork and Build (Windows)</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="oplaydo1.html">oplaydo1 (Windows)</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="fork_and_build_linux.html">Fork and Build (Linux)</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="oplaydo1_linux.html">oplaydo1 (Linux)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pi_installer_dev_procedure.html">PI Manager Dev Procedure</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ci-push-build-to-git.html">CI: Push build to Git Release</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ci_travis_encryption_windows.html">CI: Travis Encryption for Windows Dev</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="advanceddebugtips.html">CI Advanced Debug Tips</a>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Plugin Installer Manual</span>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#plugin-installer:ROOT:Home.adoc">Home-Plugin-Installer</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">OpenCPN Developer Manual</span>
    <span class="version">5.3.1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="index.html">OpenCPN Developer Manual</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">5.3.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">OpenCPN Developer Manual</a></li>
    <li>Developer Manual</li>
    <li>The Attic</li>
    <li><a href="compiling_plugins_to_debug.html">Compile Plugins for Debugging</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Compile Plugins for Debugging</h1>
<div class="sect1">
<h2 id="_plugin_debug_configuration_inline_with_opencpn"><a class="anchor" href="#_plugin_debug_configuration_inline_with_opencpn"></a>Plugin Debug Configuration inline with Opencpn</h2>
<div class="sectionbody">
<div class="literalblock">
<div class="content">
<pre> +
== Why? ===</pre>
</div>
</div>
<div class="paragraph">
<p><strong>The reason we want to do this is to find bugs in a plugin!!!</strong></p>
</div>
<div class="paragraph">
<p>External Standalone Plugins which need debugging generally should be
compiled within an existing operational OpenCPN Debug environment in
order to be debugged and have the code fixed. To do this you first need
to have a working
<a href="#compiling_windows.adoc" class="page unresolved">Windows
Development Environment for Compiling using MS Visual Studio 2013</a>.</p>
</div>
<div class="paragraph">
<p><strong>Finding Errors &amp; Fixing them </strong><br>
We need the errors in the form of a filename and which line(s)
specifically, and preferably a copy of the "call stack" The next step is
to actually fix the problem and test again. All of this is done easiest
in a single development environment as described below.</p>
</div>
<div class="paragraph">
<p><strong>Standalone Plugin Compilation for Release.</strong><br>
If you have a plugin that is mature and just needs to be compiled for
windows release and NSIS packaged then compiling in the
<a href="compiling_external_plugins_and_building_install_packages.html" class="page">standalone
configuration</a> is generally easiest and quickest.</p>
</div>
<div class="paragraph">
<p><strong>Standalone Plugin Compilation for Debug.</strong> It is perfectly reasonable to
compile a standalone plugin for debugging and then copy the dll and data
to the source\build\plugin directory and then run cmake -T v120_xp ..
from source\build, then open MS Visual Studio, build and then <em>Debug &gt;
Start</em> Debugging.<br>
<br>
=== Conceptual: How do we configure for Plugin Debugging? ====</p>
</div>
<div class="paragraph">
<p>External Plugins which need debugging should be setup in the same or
similar structure to the way the 4 Internal Plugins are setup. See the
bottom of
<a href="#compiling_windows">Setup
Batch Files</a> for a 4 Internal Plugins Table which shows source and
destination directories.</p>
</div>
<div class="paragraph">
<p>Example of a "Source" Directory under github:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>  C:\users\[username]\Documents\GitHub\obeta\**source**
  source\plugins               &lt;-- Git clone https:\\username\name_pi into here.
  source\buildwin              &lt;-- name_pi binaries &amp; special dlls, exe put here.
  source\build                 &lt;-- cmake commands are executed from this directory.
  source\build\plugins         &lt;-- copy name_pi.dll from the directory below to here.
  source\build\plugins\debug   &lt;-- copy compiled debug name_pi.dll from here
  source\build\plugins\release &lt;-- copy compiled release name_pi.dll from here
  source\build\release         &lt;-- copy buildwin binaries &amp; dlls to here for running release.
  source\build\release\plugins&lt;--copy release name_pi.dll to here + source\plugins\name_pi\data\*.*.</pre>
</div>
</div>
<div class="paragraph">
<p>The <strong>source</strong> might be named OpenCPN</p>
</div>
<div class="paragraph">
<p>Use the command prompt to git clone the plugin into source\plugins</p>
</div>
<div class="literalblock">
<div class="content">
<pre>cd  source\plugins
Git Clone https:\\github.com\username\name_pi
Git Fetch</pre>
</div>
</div>
<div class="paragraph">
<p>Now new source files and directories are found under
source\plugins\name_pi.<br>
This folder contains the data folder and other files necessary for cmake
and compilation.<br>
The git clone plugin files are located in the same directory as the
sourced internal plugin files.</p>
</div>
<div class="paragraph">
<p>Assuming a fresh git clone &amp; install, run</p>
</div>
<div class="literalblock">
<div class="content">
<pre>mkdir build
cd build
CMake -T v120_xp ..
CMake --build . --config debug
CMake --build . --config debug</pre>
</div>
</div>
<div class="paragraph">
<p>A new Plugins folder is created build\plugins\name_.pi directory with
subfolders "debug" and "release"</p>
</div>
<div class="literalblock">
<div class="content">
<pre>**source**\build\**plugins**\name_pi\**DEBUG**\name_pi.DLL</pre>
</div>
</div>
<div class="paragraph">
<p>So that MS VStudio Debug Build can run the four debug plugins we need to
copy the DEBUG version of name_pi.dll up several levels to</p>
</div>
<div class="literalblock">
<div class="content">
<pre>**source**\build\**plugins**\name_pi.DLL</pre>
</div>
</div>
<div class="paragraph">
<p>Also this name_pi.DLL needs its corresponding DATA directory from
source\plugins\name_pi\DATA*.* copied into the same
source\build\plugins directory.</p>
</div>
<div class="paragraph">
<p>A similar structure occurs for running a Release version, but the
destination is source\build\release\plugins. However we are not
interested in release versions here. We should follow the pattern for
debugging.<br>
<br>
<br>
==== 1. Step by Step, For real, not difficult, if the plugin works ====</p>
</div>
<div class="paragraph">
<p>Which Plugins directory to use for git clone &amp; debugging?</p>
</div>
<div class="literalblock">
<div class="content">
<pre>source\plugins</pre>
</div>
</div>
<div class="paragraph">
<p>in MS VS Command Prompt, navigate to <strong>source\plugins</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>git clone https:\\github.com\[username]\[name]_pi</pre>
</div>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>cd  C:\Users\[username]\Documents\GitHub\obeta\OpenCPN\plugins
git clone https://github.com/seandepagnier/projections_pi
Cloning into 'vdr_pi'...
..
Unpacking objects: 100% (70/70), done.
Checking connectivity... done.</pre>
</div>
</div>
<div class="paragraph">
<p>We now have a "source\plugins\projections_pi directory" with files and
possibly a "data" directory<br>
We have the necessary files and folder to CMake and compile.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If it exists, Copy the source\plugins\name_pi\data*.* to
source\build\plugins\name_pi\data</p>
</li>
<li>
<p>Read name_pi README for necessary binaries &amp; dlls.</p>
</li>
<li>
<p>Next download any required windows binaries &amp; dlls listed in the
plugin README</p>
</li>
<li>
<p>Expand binaries and place them in the source\buildwin directory.</p>
</li>
<li>
<p>Also copy them to source\build and source\build\release.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The projections_pi plugin has not DATA directory and requires no
binaries.<br>
CMake can now be run.<br>
<br>
==== 2. Run CMake &amp; Compile ====</p>
</div>
<div class="literalblock">
<div class="content">
<pre>cd ..
cd build   to source\build
cmake -T v120_xp ..
cmake --build . --target package --config release
cmake --build . --config debug</pre>
</div>
</div>
<div class="paragraph">
<p>Projections_pi did complete successfully with 0 Errors and 0 Warnings.</p>
</div>
<div class="paragraph">
<p>However the 5 plugins I tried first all had errors I could not figure
out. Errors… hmmm. These occur often due to the peculiarities of a
plugins. Various techniques are required to get the plugin going.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If source\plugins\name_pi and source\build\plugins\name_pi is
removed you can start over with cmake -T v120_xp .. etc and build
successfully.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Once the plugin compiles successfully, with no errors, the compiled file
need to be copied before testing and debugging the plugin.<br>
<br>
==== 3. Copy files and Setup for Debugging ====</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Copy  source\build\plugins\name_pi\debug\name_pi.DLL
TO  source\build\plugins\name_pi.DLL

Copy  source\plugins\name_pi\DATA\*.*
TO  source\build\plugins\DATA</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre> +
=== Alternative 1 - Create a link to the Debug DLL ===</pre>
</div>
</div>
<div class="paragraph">
<p>TransmitterDan has suggested creating a link to point to the Debug DLL
in
<a href="http://www.cruisersforum.com/forums/f134/development-debugging-environment-setup-help-87680.html#post2339557">Cruiser
Forums Development Environment Thread</a></p>
</div>
<div class="paragraph">
<p>When building plugins and debugging you can create a link to the plugin
thus you don&#8217;t have to disturb the actual plugins folder.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Less confusion, everything stays the same standalone pi and opencpn
debuging.</p>
</li>
<li>
<p>Control of link from one place.</p>
</li>
<li>
<p>Less copying of files/directories, thus keeping MSVS++ OpenCPN
pristine, without all the pi stuff.</p>
</li>
<li>
<p>No need to copy the Debug dll and name_pi dir to source/build/plugins</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Something like this should work:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>  cd OpenCPN\plugins
  mklink /D vdr_pi c:\myplugins\vdr_pi</pre>
</div>
</div>
<div class="paragraph">
<p>At this point Cmake will see <strong>OpenCPN\plugins\vdr_pi</strong> as a folder and it
will configure the plugin for building. Git will ignore
<strong>OpenCPN\plugins\vdr_pi</strong> however.</p>
</div>
<div class="paragraph">
<p>Then you should be able to build either from <strong>\myplugins\vdr_pi</strong> or you
can build from within the overall OpenCPN build. The link is the same as
being inline with OpenCPN except Git does see the link and shows it as
an untracked folder which is ok as far as I can tell.</p>
</div>
<div class="paragraph">
<p>To get rid of the link but not the plugin folder itself:</p>
</div>
<div class="literalblock">
<div class="content">
<pre> cd OpenCPN\plugins
 rmdir vdr_pi</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre> +
=== Alternative 2 - Modify Plugin Manager ===</pre>
</div>
</div>
<div class="paragraph">
<p>Modify PluginManager to point to the debug DLL location. This section
should be modified with this added information, which adds the dll to
the plugin manager and permits MSVC++ to find and run the debug plugin.</p>
</div>
<div class="paragraph">
<p>See Cruiser Forum Post:
<a href="http://www.cruisersforum.com/forums/f134/navico-radar-plugin-v3-0-beta3-v3-907-released-190692.html#post2483769" class="bare">http://www.cruisersforum.com/forums/f134/navico-radar-plugin-v3-0-beta3-v3-907-released-190692.html#post2483769</a></p>
</div>
<div class="paragraph">
<p>"Normally from MSVS++ Run OpenCPN in debug mode with the plugin built
internally similar to Dashboard or Chartdownloader. To Debug externally
compiled Debug DLL&#8217;s the process is slightly different.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The plugin dll must be found by MSVC++ Opencpn, so pluginmanager must
be adjusted to find it.</p>
</li>
<li>
<p>First compile the Standalone plugin for debug.</p>
</li>
<li>
<p>Locate the debug dll and copy it to where pluginmanager is set to find
it.</p>
</li>
<li>
<p>Then run MSVC++ OpenCPN in debug mode.</p>
</li>
<li>
<p>Thus you must copy the debug.dll every time you build.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The easy way to avoid having to copy the Debug.dll every time is to make
a few changes in pluginmanager.cpp which has pluginmanager take care of
the dll copying, or to tell pluginmanager where to find the particular
debug.dll.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>bool PlugInManager::LoadAllPlugIns(const wxString &amp;plugin_dir, bool load_enabled, bool b_enable_blackdialog)
{
    pConfig-&gt;SetPath( _T("/PlugIns/") );
    SetPluginOrder( pConfig-&gt;Read( _T("PluginOrder"), wxEmptyString ) );

    //  Enable the compatibility dialogs if requested, and has not been already done once.
    m_benable_blackdialog = b_enable_blackdialog &amp;&amp; !m_benable_blackdialog_done;

    #if _DEBUG    //Has for debug use
#ifdef __WXMSW__
    bool x;
    wxString f, volume, path, name, ext, mess;
    wxString destf, Dest = _T("C:\\Builds\\OCPN\\OpenCPN\\build\\plugins\\Debug_pi\\");

    f = wxFindFirstFile(_T("C:\\Builds\\OCPN\\OpenCPN\\build\\plugins\\dashboard_pi\\Debug\\*.*"), wxFILE);
        while (!f.empty())
        {
            wxFileName::SplitPath(f, &amp;volume, &amp;path, &amp;name, &amp;ext);
            destf = Dest;
            destf &lt;&lt; name &lt;&lt; _T(".") &lt;&lt; ext;
            x = wxCopyFile(f, destf, true);
            f = wxFindNextFile();
        }
        mess = name;

    f = wxFindFirstFile(_T("C:\\Builds\\OCPN\\OpenCPN\\build\\plugins\\wmm_pi\\Debug\\*.*"), wxFILE);
        while (!f.empty())
        {
            wxFileName::SplitPath(f, &amp;volume, &amp;path, &amp;name, &amp;ext);
            destf = Dest;
            destf &lt;&lt; name &lt;&lt; _T(".") &lt;&lt; ext;
            x = wxCopyFile(f, destf, true);
            f = wxFindNextFile();
        }
        mess &lt;&lt; _T(" and ") &lt;&lt; name;
        //x = wxCopyFile(_T("C:\\Builds\\OCPN\\OpenCPN\\build\\plugins\\BR24radar_pi\\Debug\\br24radar_pi.dll"),
        //  _T("C:\\Builds\\OCPN\\OpenCPN\\build\\plugins\\Debug_pi\\br24radar_pi.dll"), true);
        if (0) { // Set 1 for BR24
            f = wxFindFirstFile(_T("C:\\Builds\\OCPN\\OpenCPN\\build\\plugins\\BR24radar_pi\\Debug\\*.*"), wxFILE);
            while (!f.empty())
            {
                wxFileName::SplitPath(f, &amp;volume, &amp;path, &amp;name, &amp;ext);
                destf = Dest;
                destf &lt;&lt; name &lt;&lt; _T(".") &lt;&lt; ext;
                x = wxCopyFile(f, destf, true);
                f = wxFindNextFile();
            }
            mess &lt;&lt; _T(" and ") &lt;&lt; name;
        }
        mess &lt;&lt; _T(" copied to ") &lt;&lt; Dest;
        //wxMessageBox(mess, _T("Debug - Plugin info"));

    m_plugin_location = _T("C:\\Builds\\OCPN\\OpenCPN\\build\\plugins\\Debug_pi\\");
#endif
    #else
        m_plugin_location = plugin_dir;
    #endif

    wxString msg(_T("PlugInManager searching for PlugIns in location "));
    msg += m_plugin_location;
    wxLogMessage(msg);</pre>
</div>
</div>
<div class="paragraph">
<p>For example BR24radar_pi is not included for the moment due to comment
of corresponding lines.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>m_plugin_location = _T("C:\\Builds\\OCPN\\OpenCPN\\build\\plugins\\Debug_pi\\");</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre> +
 +
==== 4. Start MS VStudio and start debugging. ====</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Set the startup project to <strong>Opencpn</strong></p>
</li>
<li>
<p>Pick <strong>*Build". It should just confirm everything is built. - Pick
*Debug &gt; Start Debugging</strong></p>
<div class="literalblock">
<div class="content">
<pre> +
 +
==== 5. Plugins which work in Plugin Debug Configuration ====</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>chartdldr_pi - internal opencpn</p>
</li>
<li>
<p>dashboard_pi - internal opencpn</p>
</li>
<li>
<p>grib_pi - internal opencpn</p>
</li>
<li>
<p>wmm_pi - internal opencpn</p>
</li>
<li>
<p><a href="https://github.com/seandepagnier/projections_pi">Projections_pi Sean&#8217;s</a>
2/26/2017 rgleason</p>
</li>
<li>
<p><a href="https://github.com/tom-r/tactics_pi">Tactics_pi Tom Big_Speedy&#8217;s</a>
2/26/2017 rgleason</p>
</li>
<li>
<p><a href="https://github.com/PovlAbrahamsen/celestial_navigation_pi">Celestial
Navigation Povl&#8217;s</a> 2/27/2017 rgleason</p>
</li>
<li>
<p><a href="https://github.com/nohal/launcher_pi">Launcher_pi</a> 2/27/2017 rgleason</p>
<div class="literalblock">
<div class="content">
<pre> +
 +
==== 6. Plugins which do NOT work in Plugin Debug Configuration ====</pre>
</div>
</div>
</li>
<li>
<p><a href="https://github.com/Rasbats/vdr_pi">VDR_pi version Mike - Rasbats</a>
2/26/2017 rgleason</p>
</li>
<li>
<p><a href="https://github.com/Rasbats/DR_pi">DR_pi Mike - Rasbats</a> 2/26/2017
rgleason</p>
</li>
<li>
<p><a href="https://github.com/seandepagnier/weatherfax_pi">Weatherfax_pi Sean&#8217;s</a>
2/26/2017 rgleason</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.
     Sources: https://gitlab.com/leamas/antora-ui-default
  </p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
