<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: OpenCPN Manuals</title>
    <link rel="canonical" href="https://rasbats.github.io/ocpn-manuals/opencpn-beta-plugins/0.1/autopilot_route/autopilot_route.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <div class="navbar">
    <div class="navbar-brand">
      <div class="ocpn-logo"> </div>
      <a class="navbar-title"
         href="https://rasbats.github.io/ocpn-manuals"
      >
        OpenCPN Manuals
        </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
       <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
              <a class="navbar-item" href="https://www.opencpn.org/">
                OpenCPN.org
              </a>
              <a class="navbar-item" href="https://opencpn.org/wiki/dokuwiki/doku.php?id&#x3D;opencpn:opencpn_user_manual
">
                User Manual
              </a>
              <a class="navbar-item" href="https://github.com/opencpn/OpenCPN">
                Github Site
              </a>
              <a class="navbar-item" href="https://opencpn.org/flyspray/">
                Bugtracker
              </a>
              <a class="navbar-item" href="https://rasbats.github.io/opencpn-plugins-manual/">
                Plugin Manual (WIP)
              </a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="opencpn-beta-plugins" data-version="0.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">OpenCPN Beta Plugins</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../index.html">Home Page</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../beta-plugins.html">Beta Plugins</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">OpenCPN Beta Plugins</span>
    <span class="version">0.1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">OpenCPN Beta Plugins</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../ocpn-dev-manual/5.3.1/index.html">OpenCPN Developer Manual</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../ocpn-dev-manual/5.3.1/index.html">5.3.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../manuals/0.1/index.html">OpenCPN Manuals</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../manuals/0.1/index.html">0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../opencpn-master-plugins/0.1/index.html">OpenCPN Plugins</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../opencpn-master-plugins/0.1/index.html">0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../otcurrent/0.1/otcurrent.html">otcurrent</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../otcurrent/0.1/otcurrent.html">0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../shipdriver/0.1/shipdriver.html">ShipDriver</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../shipdriver/0.1/shipdriver.html">0.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../manuals/0.1/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
  <div class="edit-this-page"><a href="https://github.com/Rasbats/ocpn-manuals/edit/manual/plugins/manual-beta/modules/autopilot_route/pages/autopilot_route.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div class="sect1">
<h2 id="_autopilot_route"><a class="anchor" href="#_autopilot_route"></a>AutoPilot Route</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_aim"><a class="anchor" href="#_aim"></a>Aim</h3>
<div class="paragraph">
<p>Provide Configurable Autopilot Route following abilities for OpenCPN.</p>
</div>
<div class="paragraph">
<p>The autopilot route plugin (beta) is a completely separate plugin to be
used with any autopilot. It allows you to use different algorithms and
closely tune them for route following logic. It has nothing specific to
pypilot. This plugin allows the user to select different algorithms and
closely tune them for route following logic. The autopilot route plugin
replaces the nmea APB output built into opencpn with many more options
for computing how this sentence is generated. It does output a
continuously changing bearing in some modes which is no problem for
pypilot, but some autopilots might not allow it.</p>
</div>
</div>
<div class="sect2">
<h3 id="_links"><a class="anchor" href="#_links"></a>Links</h3>
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://github.com/seandepagnier/autopilot_route_pi">Github
Source</a> by Sean Depagnier</p>
</li>
<li>
<p>Releases:
<a href="https://github.com/seandepagnier/autopilot_route_pi/releases">Autopilot_route_pi
Pre-Release</a></p>
</li>
<li>
<p>Releases for Windows:
<a href="https://github.com/rgleason/autopilot_route_pi/releases">Autopilot_route_pi
Pre-Release for Windows</a></p>
</li>
<li>
<p>Forum:
<a href="http://www.cruisersforum.com/forums/f134/autopilot-route-plugin-197566.html">Autopilot_Route_pi
Cruisers Forum Thread</a></p>
</li>
<li>
<p>Forum:
<a href="http://www.cruisersforum.com/forums/f134/autopilot-control-196347.html">Another
CF thread re AP Control</a></p>
</li>
<li>
<p>Video: The autopilot route plugin capable of steering under sail in
harbors <a href="https://youtu.be/KQuBwLSMSxI">Pypilot on Princess Mia</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The autopilot route plugin is capable of steering under sail in harbors.
This plugin is used in Sean&#8217;s video of a heavy steel sailboat with a
windshield wiper motor driving the wheel and Autopilot_Route_pi
directing the motor: <a href="https://youtu.be/KQuBwLSMSxI" class="bare">https://youtu.be/KQuBwLSMSxI</a></p>
</div>
<div class="paragraph">
<p>Modes:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Route Position Bearing</p>
</li>
<li>
<p>Standard Cross Track XTE -XTE multiplier</p>
</li>
<li>
<p>Waypoint Bearing -by Distance or by Time</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Options</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Confirm Bearing change on Waypoint Arrival.</p>
</li>
<li>
<p>Intercept Route on Current Course</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>It has several other very nice features.</p>
</div>
<div class="paragraph">
<p>Interface Note</p>
</div>
<div class="paragraph">
<p>Keep in mind that this plugin does not have a normal toolbox icon or
menu, it&#8217;s settings are controlled from the preferences menu.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/autopilot_route.png" alt="autopilot route"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="_douwe_fokkema_advises"><a class="anchor" href="#_douwe_fokkema_advises"></a>Douwe Fokkema advises:</h3>
<div class="ulist">
<ul>
<li>
<p>There is a proprietary PGN that allows setting the heading of the
Raymarine EV-1 pilot when it is in auto mode. This is PGN 126208 with a
data length of 14. In canboat format this pgn looks as follows:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-code hljs" data-lang="code">Z,3,126208,7,204,14,01,50,ff,00,f8,03,01,3b,07,03, 04,06,f0,3d</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>The last 2 data bytes indicate the heading to be set in thousands of
radials, least significant first (divide by 174.53 to get degrees). So
the above will set a heading of 91 degrees.</p>
</li>
<li>
<p>This is tested with canboat and a Actisense NGT-1 and functions
flawless.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_sean_advises"><a class="anchor" href="#_sean_advises"></a>Sean Advises:</h3>
<div class="paragraph">
<p>The autopilot route plugin could easily be extended to emit this
message. I cannot really implement it because I have no way of testing
it.</p>
</div>
<div class="sect3">
<h4 id="_autopilot_connection_from_windows_via_usb"><a class="anchor" href="#_autopilot_connection_from_windows_via_usb"></a>Autopilot Connection from Windows via USB</h4>
<div class="paragraph">
<p>NMEA is a serial connection using the RS422 physical layer. While the
'S' in 'USB' does stand for serial it is an entirely different serial
system. You will need a USB-serial converter for your laptop (unless
your laptop has an actual serial port, most newer ones do not). Done
properly you would get a USB-RS422 converter, but most systems will also
work with the more common USB-RS232 connector.</p>
</div>
<div class="paragraph">
<p>You will also need the driver for your operating system and the
converter you select, not all are created equal so make sure your flavor
of operating system is supported. After that the converter will appear
as a 'COM' port in Windows and you configure O to output to that COM
port.</p>
</div>
<div class="paragraph">
<p>There are lots of other options, including adding a WiFi dongle to your
Raymarine that means you don&#8217;t have to use wires, but those get more
complicated.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_faq"><a class="anchor" href="#_faq"></a>FAQ</h3>
<div class="sect3">
<h4 id="_how_to_pair_autopilot_route_pi_with_pypilot"><a class="anchor" href="#_how_to_pair_autopilot_route_pi_with_pypilot"></a>How to ‘pair’ Autopilot_Route _pi with Pypilot?</h4>
<div class="paragraph">
<p>Pypilot works well itself. Autopilot_Route works itself and shows the
right overlay but does not direct pypilot in any gps or compass mode.</p>
</div>
</div>
<div class="sect3">
<h4 id="_it_looks_like_we_have_to_find_how_to_direct_nmea_output_from_autopilot_to_signalk_could_somebody_share_how_one_would_use_autopilot_with_pypilot_or_pypilot_motor_controller"><a class="anchor" href="#_it_looks_like_we_have_to_find_how_to_direct_nmea_output_from_autopilot_to_signalk_could_somebody_share_how_one_would_use_autopilot_with_pypilot_or_pypilot_motor_controller"></a>It looks like we have to find how to direct nmea output from autopilot to signalk. Could somebody share how one would use autopilot with pypilot or pypilot motor controller?</h4>
<div class="paragraph">
<p>The Autopilot_Route Plugin is not specific to Pypilot or any other
autopilot. It replaces the nmea APB output built into opencpn with many
more options for computing how this sentence is generated. It does
output a continuously changing bearing in some modes which is no problem
for Pypilot, but some autopilots might not allow it.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>I didn&#8217;t try other autopilots with the route plugin, but apparently
some autopilots require confirmation on bearing change. So the apb must
give the same bearing always and only after xte.</p>
</li>
<li>
<p>The autopilot route plugin outputs a continuously changing bearing in
some modes always with xte of 0 (because xte is not used) so the
autopilot must accept this and not require confirmation for it to work.</p>
</li>
<li>
<p>To make Pypilot follow routes from either Opencpn without the
autopilot route plugin or with it is the same. You need to make tcp
connection from Opencpn to Pypilot port 20220 with “output on this port”
checked.</p>
</li>
<li>
<p>The latest version of the Pypilot Plugin can automatically send nmea
sentences to port 20220 on whatever host it connects to Pypilot for
Signalk which makes it easier to change the autopilot host (if you have
more than one, for example) without needing to add or change the
connection in opencpn.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_rpi_pypilot_links"><a class="anchor" href="#_rpi_pypilot_links"></a>RPI Pypilot Links</h4>
<div class="ulist">
<ul>
<li>
<p>Source: <a href="https://github.com/seandepagnier/rpi_autopilot">PyPilot Github
(Raspberry Pi Autopilot)</a> also same author</p>
</li>
<li>
<p>Manual:
<a href="https://opencpn.org/wiki/dokuwiki/doku.php?id=opencpn:supplementary_hardware:screens&amp;s%5B%5D=pypilot#pypilot_autopilot">Pypilot
Opencpn Manual</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.
     Sources: https://gitlab.com/leamas/antora-ui-default
  </p>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
